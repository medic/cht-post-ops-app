<?xml version="1.0"?>
<h:html xmlns="http://www.w3.org/2002/xforms" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jr="http://openrosa.org/javarosa" xmlns:orx="http://openrosa.org/xforms">
  <h:head>
    <h:title>Edit Person</h:title>
    <model>
      <instance>
        <data id="contact:person:edit" prefix="J1!contact:person:edit!" delimiter="#" version="2017-10-16 00:00:00">
          <person>
            <name/>
            <vmmc_no/>
            <study_no/>
            <mobile_company/>
            <mobile_other/>
            <transport_cost/>
            <clinic_trip>
              <hours/>
              <minutes/>
            </clinic_trip>
            <food_cost/>
            <wage_period/>
            <wage_amount/>
          </person>
          <meta tag="hidden">
            <instanceID/>
          </meta>
        </data>
      </instance>
      <bind nodeset="/data/person/name" type="string" required="true()" jr:constraintMsg="Please enter client full name"/>
      <bind nodeset="/data/person/vmmc_no" type="string" required="true()" jr:constraintMsg="Please enter valid VMMC client number" constraint="regex(., '^[A-Za-z0-9]{1,7}$')"/>
      <bind nodeset="/data/person/study_no" type="string" required="true()" jr:constraintMsg="Please enter valid 2wT study number" constraint="regex(., '^[0-9]{4}$')"/>
      <bind nodeset="/data/person/mobile_company" type="select1" required="true()"/>
      <bind nodeset="/data/person/mobile_other" type="string" relevant="selected(../mobile_company, 'other')"/>
      <bind nodeset="/data/person/transport_cost" type="decimal" required="true()" jr:constraintMsg="Must be greater than or equal to 0" constraint=". &gt;= 0"/>
      <bind nodeset="/data/person/clinic_trip/hours" type="int" jr:constraintMsg="Must be greater than or equal to 0" constraint=". &gt;= 0"/>
      <bind nodeset="/data/person/clinic_trip/minutes" type="int" jr:constraintMsg="Must be between 0 and 59" constraint=". &gt;= 0 and . &lt; 60"/>
      <bind nodeset="/data/person/food_cost" type="decimal" required="true()" jr:constraintMsg="Must be greater than or equal to 0" constraint=". &gt;= 0"/>
      <bind nodeset="/data/person/wage_period" type="select1" required="true()"/>
      <bind nodeset="/data/person/wage_amount" type="decimal" required="true()" jr:constraintMsg="Must be greater than or equal to 0" relevant=" /data/person/wage_period  = 'daily' or  /data/person/wage_period  = 'monthly'" constraint=". &gt;= 0"/>
      <bind nodeset="/data/meta/instanceID" type="string" readonly="true()" calculate="concat('uuid:', uuid())"/>
    </model>
  </h:head>
  <h:body class="pages">
    <group appearance="field-list" ref="/data/person">
      <label></label>
      <input ref="/data/person/name">
        <label>Patient Name</label>
      </input>
      <input ref="/data/person/vmmc_no">
        <label>VMMC Client Number</label>
        <hint>e.g. WM0000</hint>
      </input>
      <input ref="/data/person/study_no">
        <label>2WT Study Number</label>
        <hint>e.g. 0001</hint>
      </input>
      <select1 ref="/data/person/mobile_company">
        <label>What is your cell phone company?</label>
        <item>
          <label>MTN</label>
          <value>mtn</value>
        </item>
        <item>
          <label>Vodacom</label>
          <value>vodacom</value>
        </item>
        <item>
          <label>Cell C</label>
          <value>cellc</value>
        </item>
        <item>
          <label>Telcom</label>
          <value>telcom</value>
        </item>
        <item>
          <label>Other</label>
          <value>other</value>
        </item>
      </select1>
      <input ref="/data/person/mobile_other">
        <label>Please enter your cell phone company</label>
      </input>
      <input ref="/data/person/transport_cost">
        <label>How much did you pay in transportation to come to the clinic?</label>
      </input>
      <group appearance="field-list" ref="/data/person/clinic_trip">
        <label>How long did it take you to get to the clinic</label>
        <input ref="/data/person/clinic_trip/hours">
          <label>Hours</label>
        </input>
        <input ref="/data/person/clinic_trip/minutes">
          <label>Minutes</label>
        </input>
      </group>
      <input ref="/data/person/food_cost">
        <label>How much did you spend in food and drink as a part of this visit ($)</label>
      </input>
      <select1 ref="/data/person/wage_period">
        <label>Wage period</label>
        <item>
          <label>Daily</label>
          <value>daily</value>
        </item>
        <item>
          <label>Weekly</label>
          <value>weekly</value>
        </item>
        <item>
          <label>Monthly</label>
          <value>monthly</value>
        </item>
        <item>
          <label>None</label>
          <value>none</value>
        </item>
      </select1>
      <input ref="/data/person/wage_amount">
        <label>Wage amount</label>
      </input>
    </group>
  </h:body>
</h:html>
